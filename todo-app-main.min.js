"use strict";window.addEventListener("resize",(a=>{location.reload()}));const vars={tasksdiv:document.getElementById("all-tasks"),itemsleft:document.getElementById("js-items-left"),newTaskTextArea:document.getElementById("enter-task"),completedBtn:document.querySelector(".js-completed-btn"),activeBtn:document.querySelector(".js-active-btn"),clearBtn:document.querySelector(".js-clear-btn"),allBtn:document.querySelector(".js-all-btn"),lightBtn:document.getElementById("js-light-btn"),darkBtn:document.getElementById("js-dark-btn"),html:document.querySelector("html"),reset:document.querySelector(".js-reset-btn")},tasks="todo-app-main-*&*=^^&*@%$!?-tasks",active="todo-app-main-$@#&*(!?@$%-active",completed="todo-app-main@!#$%^&*(#$%@!^%-completed",light="todo-app-main-@$$#@^%(*-lighten";let sortable="",viewType="taskData",activeTasks=[],completedTasks=[],taskData=[];function saveToStorage(a,t){localStorage.setItem(a,JSON.stringify(t))}function loadFromStorage(a){let t=localStorage.getItem(a);return t?JSON.parse(t):null}function clearLocalStorage(){localStorage.clear()}function uuidv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(a=>(+a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+a/4).toString(16)))}let defaultTasks=[{taskId:uuidv4(),task:"Complete online JS course",checked:!0},{taskId:uuidv4(),task:"Jog around the park 3x",checked:!1},{taskId:uuidv4(),task:"10 minute meditation",checked:!1},{taskId:uuidv4(),task:"read for 1 hour",checked:!1},{taskId:uuidv4(),task:"pick up groceries",checked:!1},{taskId:uuidv4(),task:"complete todo app on frontend mentor",checked:!1}];function loadDefault(){defaultTasks=defaultTasks.reverse(),defaultTasks.forEach((a=>{const t={taskId:uuidv4(),task:a.task,checked:a.checked};taskData.unshift(t)})),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData)}const setView=a=>{viewType=a},addTaskByView=a=>{"activeTasks"===viewType?(activeTasks.unshift(a),taskData.unshift(a),saveToStorage("todo-app-main-$@#&*(!?@$%-active",activeTasks),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(activeTasks)):"completedTasks"===viewType?(a.checked=!0,completedTasks.unshift(a),taskData.unshift(a),saveToStorage("todo-app-main@!#$%^&*(#$%@!^%-completed",completedTasks),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(completedTasks)):"taskData"===viewType&&(taskData.unshift(a),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(taskData))};function getInputArray(a){const t=taskData.filter(a);if(t)return t}function taskActions(a,t,e){let s=getInputArray(t);s.length>0?(s.forEach((a=>{e.push(a)})),saveToStorage(a,e)):saveToStorage(a,e=[])}function updateTask(a){"taskData"===viewType&&taskData.forEach((t=>{t.taskId===a.currentTarget.parentElement.id&&(t.task=a.currentTarget.value,saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData))})),"activeTasks"===viewType?activeTasks.forEach((t=>{t.taskId===a.currentTarget.parentElement.id&&(t.task=a.currentTarget.value,saveToStorage("todo-app-main-$@#&*(!?@$%-active",activeTasks))})):"completedTasks"===viewType&&completedTasks.forEach((t=>{t.taskId===a.currentTarget.parentElement.id&&(t.task=a.currentTarget.value,saveToStorage("todo-app-main@!#$%^&*(#$%@!^%-completed",completedTasks))}))}function setRemoveChecked(a){taskData.forEach((t=>{t.taskId===a.currentTarget.parentElement.id&&(t.checked?(a.currentTarget.setAttribute("checked",!1),t.checked=!1):(a.currentTarget.setAttribute("checked",!0),t.checked=!0))})),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData);const t=taskData.filter(isNotChecked);vars.itemsleft.textContent=t.length}function deleteTask(a){"taskData"===viewType?(taskData=taskData.filter((t=>!(t.taskId===a.currentTarget.parentElement.id))),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(taskData)):"activeTasks"===viewType?(activeTasks=activeTasks.filter((t=>!(t.taskId===a.currentTarget.parentElement.id))),saveToStorage("todo-app-main-$@#&*(!?@$%-active",activeTasks),updateTaskContainer(activeTasks)):"completedTasks"===viewType&&(completedTasks=completedTasks.filter((t=>!(t.taskId===a.currentTarget.parentElement.id))),saveToStorage("todo-app-main@!#$%^&*(#$%@!^%-completed",completedTasks),updateTaskContainer(completedTasks))}vars.newTaskTextArea.addEventListener("keydown",(a=>{let t=/\S/.test(vars.newTaskTextArea.value);if("Enter"===a.key&&t){$("#blank-error").hasClass("show-error")&&($("#blank-error").removeClass("show-error"),$("#blank-error").addClass("hide-error"));const a=vars.newTaskTextArea.value.trim();if(a){const t={taskId:uuidv4(),task:a,checked:!1};vars.newTaskTextArea.value="Create a new todo...",e=t,"activeTasks"===viewType?(activeTasks.unshift(e),taskData.unshift(e),saveToStorage("todo-app-main-$@#&*(!?@$%-active",activeTasks),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(activeTasks)):"completedTasks"===viewType?(e.checked=!0,completedTasks.unshift(e),taskData.unshift(e),saveToStorage("todo-app-main@!#$%^&*(#$%@!^%-completed",completedTasks),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(completedTasks)):"taskData"===viewType&&(taskData.unshift(e),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(taskData))}}else"Enter"!==a.key||t||$("#blank-error").hasClass("hide-error")&&($("#blank-error").removeClass("hide-error"),$("#blank-error").addClass("show-error"));var e})),vars.allBtn.addEventListener("click",(a=>{setView("taskData"),updateTaskContainer(taskData)})),vars.completedBtn.addEventListener("click",(a=>{setView("completedTasks"),completedTasks=[],taskActions("todo-app-main@!#$%^&*(#$%@!^%-completed",isChecked,completedTasks),updateTaskContainer(completedTasks)}));const isChecked=a=>a.checked,isNotChecked=a=>!a.checked;vars.activeBtn.addEventListener("click",(a=>{setView("activeTasks"),activeTasks=[],taskActions("todo-app-main-$@#&*(!?@$%-active",isNotChecked,activeTasks),updateTaskContainer(activeTasks)}));const clearTodo=()=>{taskData=taskData.filter((a=>{if(!1===a.checked)return a})),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData)};vars.clearBtn.addEventListener("click",(()=>{setView("completedTasks"),completedTasks=[],saveToStorage("todo-app-main@!#$%^&*(#$%@!^%-completed",completedTasks),taskData=taskData.filter((a=>{if(!1===a.checked)return a})),saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData),updateTaskContainer(completedTasks)}));const updateTaskContainer=a=>{const t=taskData.filter(isNotChecked);let e;vars.itemsleft.textContent=t.length,vars.tasksdiv.innerHTML="",a&&a.forEach((({taskId:a,task:t,checked:s})=>{e=s?"checked":"",vars.tasksdiv.innerHTML+=`\n                      <div data-id='${a}'>\n                          <div class="display-flex align-items-center">\n                            <input onchange='setRemoveChecked(event)' class="checkbox-round me-1 ${a}" type="checkbox" ${e} >\n                            <label for='${a}' class='visually-hidden'>Check or uncheck task</label>\n                            \n                            <textarea aria-label='Add task' onchange='updateTask(event)'>${t}</textarea>\n                            <button aria-label='delete task' onclick='deleteTask(event)' type='button' class='delete-task transparent-bg'><svg  class='cross' xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="#494C6B" fill-rule="evenodd" d="M16.97 0l.708.707L9.546 8.84l8.132 8.132-.707.707-8.132-8.132-8.132 8.132L0 16.97l8.132-8.132L0 .707.707 0 8.84 8.132 16.971 0z"/></svg></button>\n                          </div>\n                          <hr class='bottom-hr'>\n                      </div>\n                 `})),addlisteners()},lighten=()=>{vars.darkBtn.classList.contains("hide")&&(vars.darkBtn.classList-=" hide",vars.lightBtn.classList+=" hide"),vars.lightBtn.classList.contains("show")&&(vars.lightBtn.classList-=" show",vars.darkBtn.classList+=" show"),vars.html.classList.contains("dark")&&(vars.html.classList-=" dark",vars.html.classList+=" light"),vars.darkBtn.disable=!1,vars.darkBtn.setAttribute("aria-hidden","false"),vars.darkBtn.setAttribute("aria-disabled","false"),vars.lightBtn.disable=!0,vars.lightBtn.setAttribute("aria-hidden","true"),vars.lightBtn.setAttribute("aria-disabled","true")};vars.lightBtn.addEventListener("click",(()=>{lighten(),localStorage.setItem("todo-app-main-@$$#@^%(*-lighten","true")}));const darken=()=>{vars.lightBtn.classList.contains("hide")&&(vars.lightBtn.classList-="hide",vars.darkBtn.classList+=" hide"),vars.darkBtn.classList.contains("show")&&(vars.darkBtn.classList-=" show",vars.lightBtn.classList+=" show"),vars.html.classList.contains("light")&&(vars.html.classList-=" light",vars.html.classList+=" dark"),vars.lightBtn.disable=!1,vars.lightBtn.setAttribute("aria-hidden","false"),vars.lightBtn.setAttribute("aria-disabled","false"),vars.darkBtn.disable=!0,vars.darkBtn.setAttribute("aria-hidden","true"),vars.darkBtn.setAttribute("aria-disabled","true")};vars.darkBtn.addEventListener("click",(()=>{darken(),localStorage.setItem("todo-app-main-@$$#@^%(*-lighten","false")}));const saveOrder=a=>{const t=sortable.toArray();let e=[];"taskData"===viewType&&(taskData.forEach((a=>{let s=t.indexOf(a.taskId);e[s]=a})),taskData=e,saveToStorage("todo-app-main-*&*=^^&*@%$!?-tasks",taskData))},addlisteners=()=>{[...document.querySelectorAll(".drag-task")].forEach((a=>a.addEventListener("dragend",(a=>{a.target.classList.add("dragging"),saveOrder()})))),vars.reset.addEventListener("click",(()=>{clearLocalStorage()}))};window.onload=function(){null===loadFromStorage("todo-app-main-*&*=^^&*@%$!?-tasks")?loadDefault():(taskData=loadFromStorage("todo-app-main-*&*=^^&*@%$!?-tasks"),activeTasks=loadFromStorage("todo-app-main-$@#&*(!?@$%-active"),completedTasks=loadFromStorage("todo-app-main@!#$%^&*(#$%@!^%-completed")),updateTaskContainer(taskData);"true"===localStorage.getItem("todo-app-main-@$$#@^%(*-lighten")?lighten():darken(),sortable=Sortable.create(vars.tasksdiv,{animation:150,group:"tasks"})};